

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Concepts &mdash; annex-range 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="annex-range 0.1.0 documentation" href="index.html"/>
        <link rel="up" title="Reference" href="reference.html"/>
        <link rel="next" title="Operations &amp; functions" href="operations.html"/>
        <link rel="prev" title="Reference" href="reference.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> annex-range
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="motivation.html">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="scope.html">Scope</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="reference.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#associated-types">Associated types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#taxonomy-of-ranges">Taxonomy of ranges</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ranges-and-copying-moving">Ranges and copying/moving</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#positions">Positions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#contexts-and-ranges">Contexts and ranges</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#range-properties">Range properties</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="operations.html">Operations &amp; functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="sources.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="consumers.html">Consumers</a></li>
<li class="toctree-l2"><a class="reference internal" href="transformations.html">Transformations</a></li>
<li class="toctree-l2"><a class="reference internal" href="compositions.html">Compositions</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrangements.html">Arrangements</a></li>
<li class="toctree-l2"><a class="reference internal" href="common.html">Common</a></li>
<li class="toctree-l2"><a class="reference internal" href="annex.html">Annex quick reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html#how-to-read-the-reference">How to read the reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="open_questions.html">Open questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">annex-range</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 







<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
        <li><a href="reference.html">Reference</a> &raquo;</li>
      
    <li>Concepts</li>
    <li class="wy-breadcrumbs-aside">
      
          
          <a href="_sources/concepts.rst.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="concepts">
<h1>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h1>
<div class="section" id="associated-types">
<h2>Associated types<a class="headerlink" href="#associated-types" title="Permalink to this headline">¶</a></h2>
<dl class="type">
<dt>
<a class="reference internal" href="annex.html#_CPPv2I0EN5annex4TypeE" title="annex::Type">Type</a>{<code class="descname">Rng</code>}</dt>
<dt id="_CPPv2I0EX4TypeI3RngEEN5annex5range9context_tE">
<em class="property">using </em><code class="descclassname"></code><code class="descname">context_t</code><a class="headerlink" href="#_CPPv2I0EX4TypeI3RngEEN5annex5range9context_tE" title="Permalink to this definition">¶</a></dt>
<dd><p>The decayed type of the <em>context</em> member of a <a class="reference internal" href="#_CPPv2I0EX8VariableI3RngEEN5annex5range5RangeE" title="annex::range::Range"><code class="xref cpp cpp-any docutils literal"><span class="pre">Range</span></code></a>.</p>
</dd></dl>

<dl class="type">
<dt>
<a class="reference internal" href="annex.html#_CPPv2I0EN5annex4TypeE" title="annex::Type">Type</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE">
<em class="property">using </em><code class="descclassname"></code><code class="descname">position_t</code><a class="headerlink" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">position_type</span></code> member type of <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t::Ctx"><code class="xref cpp cpp-any docutils literal"><span class="pre">Ctx</span></code></a>.</p>
</dd></dl>

<dl class="type">
<dt>
<a class="reference internal" href="annex.html#_CPPv2I0EN5annex4TypeE" title="annex::Type">Type</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE">
<em class="property">using </em><code class="descclassname"></code><code class="descname">sentinel_t</code><a class="headerlink" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal"><span class="pre">sentinel_type</span></code> member type of <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t::Ctx"><code class="xref cpp cpp-any docutils literal"><span class="pre">Ctx</span></code></a> if it exists, otherwise equivalent to <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t&lt;Ctx&gt;</span></code></a>.</p>
</dd></dl>

<dl class="type">
<dt>
<a class="reference internal" href="annex.html#_CPPv2I0EN5annex4TypeE" title="annex::Type">Type</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX4TypeI3CtxEEN5annex5range14peek_element_tE">
<em class="property">using </em><code class="descclassname"></code><code class="descname">peek_element_t</code> = result_of::peek_at&lt;<a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range14peek_element_tE" title="annex::range::peek_element_t::Ctx">Ctx</a>&amp;, <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t">position_t</a>&lt;<a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range14peek_element_tE" title="annex::range::peek_element_t::Ctx">Ctx</a>&gt;&gt;<a class="headerlink" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range14peek_element_tE" title="Permalink to this definition">¶</a></dt>
<dd><p>The result type of <a class="reference internal" href="operations.html#_CPPv2N5annex5range7peek_atE" title="annex::range::peek_at"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_at</span></code></a> applied on a context and positions appropriate for <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range14peek_element_tE" title="annex::range::peek_element_t::Ctx"><code class="xref cpp cpp-any docutils literal"><span class="pre">Ctx</span></code></a>.</p>
</dd></dl>

<dl class="type">
<dt>
<a class="reference internal" href="annex.html#_CPPv2I0EN5annex4TypeE" title="annex::Type">Type</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX4TypeI3CtxEEN5annex5range9element_tE">
<em class="property">using </em><code class="descclassname"></code><code class="descname">element_t</code> = result_of::at&lt;<a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range9element_tE" title="annex::range::element_t::Ctx">Ctx</a>&amp;, <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t">position_t</a>&lt;<a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range9element_tE" title="annex::range::element_t::Ctx">Ctx</a>&gt;&gt;<a class="headerlink" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range9element_tE" title="Permalink to this definition">¶</a></dt>
<dd><p>The element type of a <a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context"><code class="xref cpp cpp-any docutils literal"><span class="pre">Context</span></code></a>.</p>
</dd></dl>

<dl class="type">
<dt>
<a class="reference internal" href="annex.html#_CPPv2I0EN5annex4TypeE" title="annex::Type">Type</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX4TypeI3CtxEEN5annex5range12difference_tE">
<em class="property">using </em><code class="descclassname"></code><code class="descname">difference_t</code> = std::decay_t&lt;result_of::difference&lt;<a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range12difference_tE" title="annex::range::difference_t::Ctx">Ctx</a>&amp;, <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t">position_t</a>&lt;<a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range12difference_tE" title="annex::range::difference_t::Ctx">Ctx</a>&gt;, <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t">sentinel_t</a>&lt;<a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range12difference_tE" title="annex::range::difference_t::Ctx">Ctx</a>&gt;&gt;&gt;<a class="headerlink" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range12difference_tE" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This library feature is much more experimental than the rest, and is considered incomplete or unsatisfactory. It is
likely to be subject to significant changes or dropped altogether.</p>
</div>
<p>The difference type of a <a class="reference internal" href="#_CPPv2I0EX20BidirectionalContextI3CtxEEN5annex5range19RandomAccessContextE" title="annex::range::RandomAccessContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">RandomAccessContext</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="taxonomy-of-ranges">
<h2>Taxonomy of ranges<a class="headerlink" href="#taxonomy-of-ranges" title="Permalink to this headline">¶</a></h2>
<dl class="concept">
<dt>
<a class="reference internal" href="annex.html#_CPPv2I0EX4TypeI1XEEN5annex8VariableE" title="annex::Variable">Variable</a>{<code class="descname">Rng</code>}</dt>
<dt id="_CPPv2I0EX8VariableI3RngEEN5annex5range5RangeE">
<em class="property">concept </em>bool <code class="descclassname"></code><code class="descname">Range</code><a class="headerlink" href="#_CPPv2I0EX8VariableI3RngEEN5annex5range5RangeE" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This library feature is much more experimental than the rest, and is considered incomplete or unsatisfactory. It is
likely to be subject to significant changes or dropped altogether.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Notation:</th><td class="field-body"><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="n">Rng</span> <span class="n">rng</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>A range contains all the necessary information to iterate over some notional sequence of elements. &#8216;Notional&#8217; here
means that the elements need not be actual C++ references or objects living in the program, but may instead be
computed on demand.</p>
<p>A range is a triple of a context, an inclusive lower bound position, and an exclusive upper bound position. They all
together form a bounded range context where the positions are associated with their context (see <a class="reference internal" href="#copy-save"><span class="std std-ref">Ranges and copying/moving</span></a>).
They are respectively accessible as <code class="docutils literal"><span class="pre">rng.context</span></code>, <code class="docutils literal"><span class="pre">rng.from</span></code>, and <code class="docutils literal"><span class="pre">rng.to</span></code>. Furthermore, a range must be
decomposable as a triple meaning that all three members may be accessed in one go:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">ctx</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">]</span> <span class="o">=</span> <span class="n">rng</span><span class="p">;</span>
<span class="n">assert</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">ctx</span>  <span class="o">==</span> <span class="o">&amp;</span><span class="n">rng</span><span class="p">.</span><span class="n">context</span> <span class="p">);</span>
<span class="n">assert</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">low</span>  <span class="o">==</span> <span class="o">&amp;</span><span class="n">rng</span><span class="p">.</span><span class="n">from</span>    <span class="p">);</span>
<span class="n">assert</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">high</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">rng</span><span class="p">.</span><span class="n">to</span>      <span class="p">);</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#_CPPv2I0EX4TypeI3RngEEN5annex5range9context_tE" title="annex::range::context_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">context_t</span></code></a>, <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t</span></code></a>, and <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t</span></code></a> associated types can be used to query the respective types of these
members.</p>
<p>The range context is that information that is position-independent but nonetheless necessary to carry out the range
operations. In turn the range positions need only store position-specific information. For instance, a range over a
strided sequence of <code class="docutils literal"><span class="pre">int</span></code>s in memory could be represented as such:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="c1">// implementation of range operations omitted</span>
<span class="k">struct</span> <span class="n">strided_memory_range</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">context_type</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="kt">ptrdiff_t</span> <span class="n">stride</span><span class="p">;</span>

        <span class="k">struct</span> <span class="n">position_type</span> <span class="p">{</span>
            <span class="kt">int</span><span class="o">*</span> <span class="n">value</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">};</span>

    <span class="k">using</span> <span class="n">position_type</span> <span class="o">=</span> <span class="n">context_type</span><span class="o">::</span><span class="n">position_type</span><span class="p">;</span>

    <span class="n">context_type</span> <span class="n">context</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">};</span>
    <span class="n">position_type</span> <span class="n">from</span> <span class="p">{},</span> <span class="n">to</span> <span class="p">{};</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">data</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span> <span class="p">};</span>
<span class="k">auto</span> <span class="n">r</span> <span class="o">=</span> <span class="n">strided_memory_range</span> <span class="p">{</span> <span class="p">{</span> <span class="mi">2</span> <span class="p">},</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">begin</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">},</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">end</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">}</span> <span class="p">};</span>
</pre></div>
</div>
<p>All positions share the same stride, so it is best stored inside the context. Whereas what distinguishes a position
from any other is what particular <code class="docutils literal"><span class="pre">int</span></code> they refer to (or whether they are the special past-the-end value).
Provided that appropriate range operations are implemented for <code class="docutils literal"><span class="pre">strided_memory_range</span></code>, then in this example <em>r</em>
would be standing for the notional sequence of integers <span class="math">\(\left\{ 0, 2, 4, 6 \right\}\)</span>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Requirements:</th><td class="field-body"><p class="first"><a class="reference internal" href="#_CPPv2I0EX8VariableI3RngEEN5annex5range5RangeE" title="annex::range::Range::Rng"><code class="xref cpp cpp-any docutils literal"><span class="pre">Rng</span></code></a> must provide a <code class="docutils literal"><span class="pre">position_type</span></code> to enable the <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t</span></code></a> associated type that is appropriate for the
<em>from</em> member, and may optionally provide a <code class="docutils literal"><span class="pre">sentinel_type</span></code> associated type if <em>to</em> has a different type.</p>
<p>The <em>context</em> member must implement range operations appropriate for the <em>from</em> and <em>to</em> positions. In other
words, <a class="reference internal" href="#_CPPv2I0EX4TypeI3RngEEN5annex5range9context_tE" title="annex::range::context_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">context_t&lt;Rng&gt;</span></code></a> must be a model of <a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context"><code class="xref cpp cpp-any docutils literal"><span class="pre">Context</span></code></a> or one of its refinements
(<a class="reference internal" href="#_CPPv2I0EX7ContextI3CtxEEN5annex5range18DoubleEndedContextE" title="annex::range::DoubleEndedContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">DoubleEndedContext</span></code></a>, <a class="reference internal" href="#_CPPv2I0EX18DoubleEndedContextI3CtxEEN5annex5range20BidirectionalContextE" title="annex::range::BidirectionalContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">BidirectionalContext</span></code></a>, or <a class="reference internal" href="#_CPPv2I0EX20BidirectionalContextI3CtxEEN5annex5range19RandomAccessContextE" title="annex::range::RandomAccessContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">RandomAccessContext</span></code></a>) and <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t&lt;Rng&gt;</span></code></a> must
be equivalent to <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t&lt;context_t&lt;Rng&gt;&gt;</span></code></a> (likewise for <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t&lt;Rng&gt;</span></code></a> and
<a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t&lt;context_t&lt;Rng&gt;&gt;</span></code></a>).</p>
<p>Since <em>from</em> and <em>to</em> define a half-open interval of elements, only the positions up to but not equal to <em>to</em>
(with respect to <a class="reference internal" href="operations.html#_CPPv2N5annex5range9equal_posE" title="annex::range::equal_pos"><code class="xref cpp cpp-any docutils literal"><span class="pre">equal_pos</span></code></a>, see <a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context"><code class="xref cpp cpp-any docutils literal"><span class="pre">Context</span></code></a>) satisfy the preconditions for <a class="reference internal" href="operations.html#_CPPv2N5annex5range7peek_atE" title="annex::range::peek_at"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_at</span></code></a>, <a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at</span></code></a>, and <a class="reference internal" href="operations.html#_CPPv2N5annex5range4incrE" title="annex::range::incr"><code class="xref cpp cpp-any docutils literal"><span class="pre">incr</span></code></a>. In other
words and as with iterators, <em>to</em> is considered to be the past-the-end position and is not required to have an
associated element.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Associated types:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last"><a class="reference internal" href="#_CPPv2I0EX4TypeI3RngEEN5annex5range9context_tE" title="annex::range::context_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">context_t</span></code></a>, <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t</span></code></a>, <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="concept">
<dt>
<a class="reference internal" href="annex.html#_CPPv2I0EX4TypeI1XEEN5annex8VariableE" title="annex::Variable">Variable</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE">
<em class="property">concept </em>bool <code class="descclassname"></code><code class="descname">Context</code><a class="headerlink" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Notation:</th><td class="field-body"><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="n">Ctx</span> <span class="n">ctx</span><span class="p">;</span>
<span class="n">position_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="n">from</span><span class="p">;</span>
<span class="n">position_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">cfrom</span><span class="p">;</span> <span class="n">sentinel_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">cto</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>A range context. All the position-independent information together with the operations necessary to represent a
notional sequence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Requirements:</th><td class="field-body"><p class="first"><a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context::Ctx"><code class="xref cpp cpp-any docutils literal"><span class="pre">Ctx</span></code></a> must provide a <code class="docutils literal"><span class="pre">position_type</span></code> member type to comply with <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t</span></code></a>, and may optionally provide a
<code class="docutils literal"><span class="pre">sentinel_type</span></code> member type.</p>
<p><a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t&lt;Ctx&gt;</span></code></a> and <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t&lt;Ctx&gt;</span></code></a> must model <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex7MovableE" title="annex::Movable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Movable</span></code></a>. The range context and positions must follow the <a class="reference internal" href="#copy-save"><span class="std std-ref">range
copying and moving rules</span></a> and implement the <a class="reference internal" href="operations.html#id1"><span class="std std-ref">range operations</span></a> with constant time
complexity with respect to the number of elements of the sequence:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range9equal_posE" title="annex::range::equal_pos"><code class="xref cpp cpp-any docutils literal"><span class="pre">equal_pos(ctx,</span> <span class="pre">cfrom,</span> <span class="pre">cfrom)</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range9equal_posE" title="annex::range::equal_pos"><code class="xref cpp cpp-any docutils literal"><span class="pre">equal_pos(ctx,</span> <span class="pre">cfrom,</span> <span class="pre">cto)</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range9equal_posE" title="annex::range::equal_pos"><code class="xref cpp cpp-any docutils literal"><span class="pre">equal_pos(ctx,</span> <span class="pre">cto,</span> <span class="pre">cto)</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at(ctx,</span> <span class="pre">cfrom)</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range7peek_atE" title="annex::range::peek_at"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_at(ctx,</span> <span class="pre">cfrom)</span></code></a>, which must be convertible to <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range9element_tE" title="annex::range::element_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">meta::as_const&lt;element_t&lt;Ctx&gt;&gt;</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range4incrE" title="annex::range::incr"><code class="xref cpp cpp-any docutils literal"><span class="pre">incr(ctx,</span> <span class="pre">from)</span></code></a></li>
</ul>
</div></blockquote>
<p>Whenever equality of positions is mentioned, this is with respect to the context-aware, ternary <a class="reference internal" href="operations.html#_CPPv2N5annex5range9equal_posE" title="annex::range::equal_pos"><code class="xref cpp cpp-any docutils literal"><span class="pre">equal_pos</span></code></a>
operation. <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t&lt;Ctx&gt;</span></code></a> and <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t&lt;Ctx&gt;</span></code></a> are not required to be <a class="reference internal" href="annex.html#_CPPv2I_8Variable_8VariableEN5annex18EqualityComparableE" title="annex::EqualityComparable"><code class="xref cpp cpp-any docutils literal"><span class="pre">EqualityComparable</span></code></a>, and if they are equality
comparison is not required to agree with <a class="reference internal" href="operations.html#_CPPv2N5annex5range9equal_posE" title="annex::range::equal_pos"><code class="xref cpp cpp-any docutils literal"><span class="pre">equal_pos</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Elements may indifferently be references or objects.</p>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Associated types:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first"><a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t</span></code></a>, <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t</span></code></a></p>
<p><a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range14peek_element_tE" title="annex::range::peek_element_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_element_t</span></code></a>: the result type of <a class="reference internal" href="operations.html#_CPPv2N5annex5range7peek_atE" title="annex::range::peek_at"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_at</span></code></a> given appropriate context and positions</p>
<p class="last"><a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range9element_tE" title="annex::range::element_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">element_t</span></code></a>: the result type of <a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at</span></code></a> given appropriate context and positions</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="concept">
<dt>
<a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context">Context</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX7ContextI3CtxEEN5annex5range18DoubleEndedContextE">
<em class="property">concept </em>bool <code class="descclassname"></code><code class="descname">DoubleEndedContext</code><a class="headerlink" href="#_CPPv2I0EX7ContextI3CtxEEN5annex5range18DoubleEndedContextE" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This part of the design is much more experimental than the rest, and is considered incomplete or unsatisfactory. It
is likely to be subject to significant changes or dropped altogether.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Notation:</th><td class="field-body"><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="n">Ctx</span> <span class="n">ctx</span><span class="p">;</span>
<span class="n">sentinel_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="n">to</span><span class="p">;</span>
<span class="n">position_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">cfrom</span><span class="p">;</span> <span class="n">sentinel_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">cto</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>A <a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context"><code class="xref cpp cpp-any docutils literal"><span class="pre">Context</span></code></a> which can be read from both ends.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Requirements:</th><td class="field-body"><p class="first">The range context and positions must implement <a class="reference internal" href="operations.html#double-ended-operations"><span class="std std-ref">double-ended range operations</span></a> with
constant time complexity with respect to the number of elements of the sequence:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range11peek_beforeE" title="annex::range::peek_before"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_before(ctx,</span> <span class="pre">cto)</span></code></a> with type <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range14peek_element_tE" title="annex::range::peek_element_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_element_t&lt;Ctx&gt;</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range6beforeE" title="annex::range::before"><code class="xref cpp cpp-any docutils literal"><span class="pre">before(ctx,</span> <span class="pre">cto)</span></code></a> with type <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range9element_tE" title="annex::range::element_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">element_t&lt;Ctx&gt;</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range4decrE" title="annex::range::decr"><code class="xref cpp cpp-any docutils literal"><span class="pre">decr(ctx,</span> <span class="pre">to)</span></code></a></li>
</ul>
</div></blockquote>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p>Both <a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context"><code class="xref cpp cpp-any docutils literal"><span class="pre">Context</span></code></a> and <a class="reference internal" href="#_CPPv2I0EX7ContextI3CtxEEN5annex5range18DoubleEndedContextE" title="annex::range::DoubleEndedContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">DoubleEndedContext</span></code></a> allow for <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t&lt;Ctx&gt;</span></code></a> and <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t&lt;Ctx&gt;</span></code></a> to be different types. This
means that <a class="reference internal" href="operations.html#_CPPv2N5annex5range6beforeE" title="annex::range::before"><code class="xref cpp cpp-any docutils literal"><span class="pre">before(ctx,</span> <span class="pre">to)</span></code></a> is not equivalent to <a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at(ctx,</span> <span class="pre">prev(ctx,</span> <span class="pre">to))</span></code></a> in the general case.
Using <a class="reference internal" href="operations.html#_CPPv2N5annex5range7peek_atE" title="annex::range::peek_at"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_at</span></code></a>, <a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at</span></code></a>, and <a class="reference internal" href="operations.html#_CPPv2N5annex5range4incrE" title="annex::range::incr"><code class="xref cpp cpp-any docutils literal"><span class="pre">incr</span></code></a> on <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t&lt;Ctx&gt;</span></code></a> positions is not defined for <a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context"><code class="xref cpp cpp-any docutils literal"><span class="pre">Context</span></code></a> and
<a class="reference internal" href="#_CPPv2I0EX7ContextI3CtxEEN5annex5range18DoubleEndedContextE" title="annex::range::DoubleEndedContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">DoubleEndedContext</span></code></a> (and similarly <a class="reference internal" href="operations.html#_CPPv2N5annex5range11peek_beforeE" title="annex::range::peek_before"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_before</span></code></a>, <a class="reference internal" href="operations.html#_CPPv2N5annex5range6beforeE" title="annex::range::before"><code class="xref cpp cpp-any docutils literal"><span class="pre">before</span></code></a>, and <a class="reference internal" href="operations.html#_CPPv2N5annex5range4decrE" title="annex::range::decr"><code class="xref cpp cpp-any docutils literal"><span class="pre">decr</span></code></a> on <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t&lt;Ctx&gt;</span></code></a> positions).</p>
<p class="last"><a class="reference internal" href="#_CPPv2I0EX18DoubleEndedContextI3CtxEEN5annex5range20BidirectionalContextE" title="annex::range::BidirectionalContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">BidirectionalContext</span></code></a> and its refinements provide these guarantees.</p>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="concept">
<dt>
<a class="reference internal" href="#_CPPv2I0EX7ContextI3CtxEEN5annex5range18DoubleEndedContextE" title="annex::range::DoubleEndedContext">DoubleEndedContext</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX18DoubleEndedContextI3CtxEEN5annex5range20BidirectionalContextE">
<em class="property">concept </em>bool <code class="descclassname"></code><code class="descname">BidirectionalContext</code><a class="headerlink" href="#_CPPv2I0EX18DoubleEndedContextI3CtxEEN5annex5range20BidirectionalContextE" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Notation:</th><td class="field-body"><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="n">Ctx</span> <span class="n">ctx</span><span class="p">;</span>
<span class="n">position_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="n">pos</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>A <a class="reference internal" href="#_CPPv2I0EX7ContextI3CtxEEN5annex5range18DoubleEndedContextE" title="annex::range::DoubleEndedContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">DoubleEndedContext</span></code></a> which <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10position_tE" title="annex::range::position_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">position_t&lt;Ctx&gt;</span></code></a> and <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range10sentinel_tE" title="annex::range::sentinel_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">sentinel_t&lt;Ctx&gt;</span></code></a> positions are the same <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> type (also see:
<a class="reference internal" href="#copy-save"><span class="std std-ref">Ranges and copying/moving</span></a>). Additionally the following is guaranteed:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at(ctx,</span> <span class="pre">pos)</span></code></a> is equivalent to <a class="reference internal" href="operations.html#_CPPv2N5annex5range6beforeE" title="annex::range::before"><code class="xref cpp cpp-any docutils literal"><span class="pre">before(ctx,</span> <span class="pre">next(ctx,</span> <span class="pre">pos))</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range6beforeE" title="annex::range::before"><code class="xref cpp cpp-any docutils literal"><span class="pre">before(ctx,</span> <span class="pre">pos)</span></code></a> is equivalent to <a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at(ctx,</span> <span class="pre">prev(ctx,</span> <span class="pre">pos))</span></code></a></li>
</ul>
</div></blockquote>
<p>There is a similar relationship between <a class="reference internal" href="operations.html#_CPPv2N5annex5range7peek_atE" title="annex::range::peek_at"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_at</span></code></a> and <a class="reference internal" href="operations.html#_CPPv2N5annex5range11peek_beforeE" title="annex::range::peek_before"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_before</span></code></a>.</p>
</dd></dl>

<dl class="concept">
<dt>
<a class="reference internal" href="#_CPPv2I0EX18DoubleEndedContextI3CtxEEN5annex5range20BidirectionalContextE" title="annex::range::BidirectionalContext">BidirectionalContext</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX20BidirectionalContextI3CtxEEN5annex5range19RandomAccessContextE">
<em class="property">concept </em>bool <code class="descclassname"></code><code class="descname">RandomAccessContext</code><a class="headerlink" href="#_CPPv2I0EX20BidirectionalContextI3CtxEEN5annex5range19RandomAccessContextE" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Notation:</th><td class="field-body"><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="n">Ctx</span> <span class="n">ctx</span><span class="p">;</span>
<span class="n">position_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
<span class="n">difference_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">offset</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>A <a class="reference internal" href="#_CPPv2I0EX18DoubleEndedContextI3CtxEEN5annex5range20BidirectionalContextE" title="annex::range::BidirectionalContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">BidirectionalContext</span></code></a> which positions can be stepped multiple positions forwards or backwards at a time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Requirements:</th><td class="field-body"><p class="first">The range context and positions must implement <a class="reference internal" href="operations.html#random-access-operations"><span class="std std-ref">random-access range operations</span></a>
with constant time complexity with respect to the number of elements of the sequence:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range4stepE" title="annex::range::step"><code class="xref cpp cpp-any docutils literal"><span class="pre">step(ctx,</span> <span class="pre">a,</span> <span class="pre">offset)</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range10differenceE" title="annex::range::difference"><code class="xref cpp cpp-any docutils literal"><span class="pre">difference(ctx,</span> <span class="pre">a,</span> <span class="pre">b)</span></code></a></li>
</ul>
</div></blockquote>
<p><a class="reference internal" href="operations.html#_CPPv2N5annex5range4stepE" title="annex::range::step"><code class="xref cpp cpp-any docutils literal"><span class="pre">step(ctx,</span> <span class="pre">a,</span> <span class="pre">offset)</span></code></a> must accept <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range12difference_tE" title="annex::range::difference_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">difference_t&lt;Ctx&gt;</span></code></a> offset arguments as long as they don&#8217;t result in
attempting to step <em>a</em> beyond bounds. Put another way, if <em>from</em> and <em>to</em> are the bounds of the range (see
<a class="reference internal" href="#_CPPv2I0EX8VariableI3RngEEN5annex5range5RangeE" title="annex::range::Range"><code class="xref cpp cpp-any docutils literal"><span class="pre">Range</span></code></a>) then <em>offset</em> must lie within <a class="reference internal" href="operations.html#_CPPv2N5annex5range10differenceE" title="annex::range::difference"><code class="xref cpp cpp-any docutils literal"><span class="pre">[difference(ctx,</span> <span class="pre">from,</span> <span class="pre">a),</span> <span class="pre">difference(ctx,</span> <span class="pre">a,</span> <span class="pre">to)]</span></code></a>.</p>
<p>For all positions the following is guaranteed:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range4stepE" title="annex::range::step"><code class="xref cpp cpp-any docutils literal"><span class="pre">step(ctx,</span> <span class="pre">a,</span> <span class="pre">difference_t&lt;Ctx&gt;</span> <span class="pre">{</span> <span class="pre">1</span> <span class="pre">})</span></code></a> is equivalent to <a class="reference internal" href="operations.html#_CPPv2N5annex5range4incrE" title="annex::range::incr"><code class="xref cpp cpp-any docutils literal"><span class="pre">incr(ctx,</span> <span class="pre">a)</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range4stepE" title="annex::range::step"><code class="xref cpp cpp-any docutils literal"><span class="pre">step(ctx,</span> <span class="pre">a,</span> <span class="pre">difference_t&lt;Ctx&gt;</span> <span class="pre">{</span> <span class="pre">-1</span> <span class="pre">})</span></code></a> is equivalent to <a class="reference internal" href="operations.html#_CPPv2N5annex5range4incrE" title="annex::range::incr"><code class="xref cpp cpp-any docutils literal"><span class="pre">decr(ctx,</span> <span class="pre">a)</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range10differenceE" title="annex::range::difference"><code class="xref cpp cpp-any docutils literal"><span class="pre">difference(ctx,</span> <span class="pre">a,</span> <span class="pre">a)</span> <span class="pre">==</span> <span class="pre">difference_t&lt;Ctx&gt;</span> <span class="pre">{</span> <span class="pre">0</span> <span class="pre">}</span></code></a></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range10differenceE" title="annex::range::difference"><code class="xref cpp cpp-any docutils literal"><span class="pre">difference(ctx,</span> <span class="pre">a,</span> <span class="pre">b)</span> <span class="pre">==</span> <span class="pre">-difference(ctx,</span> <span class="pre">b,</span> <span class="pre">a)</span></code></a></li>
</ul>
</div></blockquote>
<p>Given <code class="docutils literal"><span class="pre">difference_t&lt;Ctx&gt;</span> <span class="pre">const</span> <span class="pre">n</span> <span class="pre">=</span> <span class="pre">difference(ctx,</span> <span class="pre">a,</span> <span class="pre">b);</span></code>, the following is guaranteed:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range4stepE" title="annex::range::step"><code class="xref cpp cpp-any docutils literal"><span class="pre">step(ctx,</span> <span class="pre">a,</span> <span class="pre">difference_t</span> <span class="pre">{</span> <span class="pre">0</span> <span class="pre">})</span></code></a> does not move <em>a</em></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range4stepE" title="annex::range::step"><code class="xref cpp cpp-any docutils literal"><span class="pre">step(ctx,</span> <span class="pre">a,</span> <span class="pre">n)</span></code></a> would make <em>a</em> equal to <em>b</em></li>
<li><a class="reference internal" href="operations.html#_CPPv2N5annex5range4stepE" title="annex::range::step"><code class="xref cpp cpp-any docutils literal"><span class="pre">step(ctx,</span> <span class="pre">b,</span> <span class="pre">-n)</span></code></a> would make <em>b</em> equal to <em>a</em></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Associated types:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last"><a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range12difference_tE" title="annex::range::difference_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">difference_t</span></code></a>: the decayed result type of <a class="reference internal" href="operations.html#_CPPv2N5annex5range10differenceE" title="annex::range::difference"><code class="xref cpp cpp-any docutils literal"><span class="pre">difference</span></code></a>, must be a model of <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex14SignedIntegralE" title="annex::SignedIntegral"><code class="xref cpp cpp-any docutils literal"><span class="pre">SignedIntegral</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="concept">
<dt>
<a class="reference internal" href="annex.html#_CPPv2IDpEX5TypesIsp2XsEEN5annex9VariablesE" title="annex::Variables">Variables</a>{...<code class="descname">Rngs</code>}</dt>
<dt id="_CPPv2IDpEX9VariablesIsp4RngsEEN5annex5range6RangesE">
<em class="property">concept </em>bool <code class="descclassname"></code><code class="descname">Ranges</code> = (... &amp;&amp; Range&lt;Rngs&gt;)<a class="headerlink" href="#_CPPv2IDpEX9VariablesIsp4RngsEEN5annex5range6RangesE" title="Permalink to this definition">¶</a></dt>
<dd><p>A variadic variant of <a class="reference internal" href="#_CPPv2I0EX8VariableI3RngEEN5annex5range5RangeE" title="annex::range::Range"><code class="xref cpp cpp-any docutils literal"><span class="pre">Range</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="ranges-and-copying-moving">
<span id="copy-save"></span><h2>Ranges and copying/moving<a class="headerlink" href="#ranges-and-copying-moving" title="Permalink to this headline">¶</a></h2>
<div class="section" id="positions">
<span id="copy-save-pass"></span><h3>Positions<a class="headerlink" href="#positions" title="Permalink to this headline">¶</a></h3>
<p>Since positions should only store as much information as necessary to uniquely stand for a particular notional element
(or the past-the-end value), it is required that copying, moving, or assigning to a position be a constant time
operation with respect to the number of elements of the sequence.</p>
<p>Additionally, while range positions are required to be <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex7MovableE" title="annex::Movable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Movable</span></code></a>, they should model <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> carefully and only when
it makes sense. Consider the following:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="c1">// assumed to have length at least 2</span>
<span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">to</span><span class="p">]</span> <span class="o">=</span> <span class="n">rng</span><span class="p">;</span>
<span class="c1">// copy a position</span>
<span class="k">auto</span> <span class="n">remember</span> <span class="o">=</span> <span class="n">pos</span><span class="p">;</span>
<span class="n">incr</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
<span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">read_at_1</span> <span class="o">=</span> <span class="n">peek_at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
<span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">read_at_0</span> <span class="o">=</span> <span class="n">peek_at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">remember</span><span class="p">);</span>
</pre></div>
</div>
<p>In this fragment the element at offset 1 is read before the element at offset 0. There are ranges for which this doesn&#8217;t
make sense, e.g. many cases involving I/O such as reading from a socket. In these cases it is not possible to draw the
second element without reading or skipping over the first, after which it is often not available for reading anymore.</p>
<p>Hence positions should only ever be <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> if they provide a multi-pass guarantee that would make the above fragment
valid and sensible. Conversely positions that are <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex7MovableE" title="annex::Movable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Movable</span></code></a> but not <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> are known as single pass, and are
associated with a particular context. Note that this gives the justification as to why a <a class="reference internal" href="#_CPPv2I0EX18DoubleEndedContextI3CtxEEN5annex5range20BidirectionalContextE" title="annex::range::BidirectionalContext"><code class="xref cpp cpp-any docutils literal"><span class="pre">BidirectionalContext</span></code></a> must
provide <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> positions: decrementing a position that was previously incremented is equivalent to returning it to
its former state:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">]</span> <span class="o">=</span> <span class="n">rng</span><span class="p">;</span>

<span class="c1">// (1)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">from</span><span class="p">;</span>
    <span class="n">incr</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
    <span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">read_at_1</span> <span class="o">=</span> <span class="n">peek_at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
    <span class="n">decr</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span> <span class="c1">// (2)</span>
    <span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">read_at_0</span> <span class="o">=</span> <span class="n">peek_at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// same as (1)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">from</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">remember</span> <span class="o">=</span> <span class="n">pos</span><span class="p">;</span>
    <span class="n">incr</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
    <span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">read_at_1</span> <span class="o">=</span> <span class="n">peek_at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">remember</span><span class="p">;</span> <span class="c1">// same as (2)</span>
    <span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">read_at_0</span> <span class="o">=</span> <span class="n">peek_at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at</span></code></a> and <a class="reference internal" href="operations.html#_CPPv2N5annex5range6beforeE" title="annex::range::before"><code class="xref cpp cpp-any docutils literal"><span class="pre">before</span></code></a> are potentially destructive reads and the multi-pass guarantee does not change that. The guarantee
provides that <a class="reference internal" href="operations.html#_CPPv2N5annex5range2atE" title="annex::range::at"><code class="xref cpp cpp-any docutils literal"><span class="pre">at</span></code></a> or <a class="reference internal" href="operations.html#_CPPv2N5annex5range6beforeE" title="annex::range::before"><code class="xref cpp cpp-any docutils literal"><span class="pre">before</span></code></a> may be called multiple times on the same notional element via different access
&#8216;paths&#8217; (i.e. without regard as to how the positions are computed), but not that their results will be stable.</p>
</div>
<p>This is similar to the distinction between an <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex13InputIteratorE" title="annex::InputIterator"><code class="xref cpp cpp-any docutils literal"><span class="pre">InputIterator</span></code></a> and a <a class="reference internal" href="annex.html#_CPPv2I0EX13InputIteratorI2ItEEN5annex15ForwardIteratorE" title="annex::ForwardIterator"><code class="xref cpp cpp-any docutils literal"><span class="pre">ForwardIterator</span></code></a>. An <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex13InputIteratorE" title="annex::InputIterator"><code class="xref cpp cpp-any docutils literal"><span class="pre">InputIterator</span></code></a> does not
follow regular <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> semantics as two or more copies of a given iterator are not equivalent: as soon as a copy is
read from, the others are invalidated for the purposes of iterator operations. This amounts to burdening the user with
handling move semantics by hand (since iterators predate the language-level move semantics of C++11) and is notoriously
error-prone. While C++11 moves are not entirely checked by the compiler and still leave room for use-after-move bugs,
making copies by accident is harder.</p>
</div>
<div class="section" id="contexts-and-ranges">
<span id="copy-save-context"></span><h3>Contexts and ranges<a class="headerlink" href="#contexts-and-ranges" title="Permalink to this headline">¶</a></h3>
<p>Since a context stores whichever position-agnostic, auxiliary information is necessary for the purpose of representing a
notional sequence, there is no complexity requirement on its <a class="reference internal" href="operations.html#_CPPv2N5annex5range4saveE" title="annex::range::save"><code class="xref cpp cpp-any docutils literal"><span class="pre">save</span></code></a>, copy, move, or assignment operations.</p>
<p class="rubric">Moving</p>
<p>A context should only model <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex7MovableE" title="annex::Movable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Movable</span></code></a> if the result of a move remains usable with any and all of its original associated
positions. In other words, moving a context must not invalidate positions:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">]</span> <span class="o">=</span> <span class="n">rng</span><span class="p">;</span>
<span class="n">assert</span><span class="p">(</span> <span class="o">!</span><span class="n">equal_pos</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span> <span class="p">);</span>

<span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">read_a</span> <span class="o">=</span> <span class="n">peek_at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">);</span>

<span class="k">auto</span> <span class="n">target</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>

<span class="c1">// re-use from and to positions</span>
<span class="n">assert</span><span class="p">(</span> <span class="o">!</span><span class="n">equal_pos</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span> <span class="p">);</span>

<span class="c1">// must have identical results to read_a</span>
<span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="n">read_b</span> <span class="o">=</span> <span class="n">peek_at</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">from</span><span class="p">);</span>
</pre></div>
</div>
<p class="rubric">Saving</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This part of the design is much more experimental than the rest, and is considered incomplete or unsatisfactory. It
is likely to be subject to significant changes or dropped altogether.</p>
</div>
<p>Certain contexts may support saving, where a &#8216;snapshot&#8217; of a given iteration is taken such that it can be iterated
separately. This is done with the <a class="reference internal" href="operations.html#_CPPv2N5annex5range4saveE" title="annex::range::save"><code class="xref cpp cpp-any docutils literal"><span class="pre">save</span></code></a> operation:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="c1">// iteration state for some notional sequence</span>
<span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">]</span> <span class="o">=</span> <span class="n">rng</span><span class="p">;</span>

<span class="c1">// separate state for an identical sequence</span>
<span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">copy</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">]</span> <span class="o">=</span> <span class="n">save</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">);</span>
</pre></div>
</div>
<p>The original positions should be used with the original context while the saved positions should be used with the saved
context. Operations on either the original range or the copy should not affect the other.</p>
<p>There is a dedicated concept for contexts which support saving:</p>
<dl class="concept">
<dt>
<a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context">Context</a>{<code class="descname">Ctx</code>}</dt>
<dt id="_CPPv2I0EX7ContextI3CtxEEN5annex5range8SaveableE">
<em class="property">concept </em>bool <code class="descclassname"></code><code class="descname">Saveable</code><a class="headerlink" href="#_CPPv2I0EX7ContextI3CtxEEN5annex5range8SaveableE" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Notation:</th><td class="field-body"><div class="first last highlight-c++"><div class="highlight"><pre><span></span><span class="n">meta</span><span class="o">::</span><span class="n">as_const</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="n">ctx</span><span class="p">;</span>
<span class="n">position_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">from</span><span class="p">;</span>
<span class="n">sentinel_t</span><span class="o">&lt;</span><span class="n">Ctx</span><span class="o">&gt;</span> <span class="k">const</span> <span class="n">to</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>A context which supports saving. A context can be saved with any number of its associated positions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Associated expressions:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first"><a class="reference internal" href="operations.html#_CPPv2N5annex5range4saveE" title="annex::range::save"><code class="xref cpp cpp-any docutils literal"><span class="pre">save(ctx,</span> <span class="pre">from)</span></code></a></p>
<p class="last"><a class="reference internal" href="operations.html#_CPPv2N5annex5range4saveE" title="annex::range::save"><code class="xref cpp cpp-any docutils literal"><span class="pre">save(ctx,</span> <span class="pre">to)</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p class="rubric">Copying</p>
<p>If a range has both <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> context and positions, then copying should be equivalent to saving:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">]</span> <span class="o">=</span> <span class="n">rng</span><span class="p">;</span>

<span class="c1">// (1) saving</span>
<span class="p">{</span>
    <span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">saved</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">]</span> <span class="o">=</span> <span class="n">save</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// (2) copying, same effects as (1)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">copied</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">low</span>  <span class="o">=</span> <span class="n">from</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">high</span> <span class="o">=</span> <span class="n">to</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The same applies if the <a class="reference internal" href="#_CPPv2I0EX8VariableI3RngEEN5annex5range5RangeE" title="annex::range::Range"><code class="xref cpp cpp-any docutils literal"><span class="pre">Range</span></code></a> itself is <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a>:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="c1">// (3) copying again, same as (2)</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="p">[</span><span class="n">copied</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">righ</span><span class="p">]</span> <span class="o">=</span> <span class="n">rng</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Lastly, a context with <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> positions must only be <a class="reference internal" href="annex.html#_CPPv2I0EX8VariableI3VarEEN5annex8CopyableE" title="annex::Copyable"><code class="xref cpp cpp-any docutils literal"><span class="pre">Copyable</span></code></a> if its positions can be used with any copy of the
context:</p>
<div class="highlight-c++"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">]</span> <span class="o">=</span> <span class="n">rng</span><span class="p">;</span>
<span class="n">assert</span><span class="p">(</span> <span class="o">!</span><span class="n">equal_pos</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span> <span class="p">);</span>

<span class="k">auto</span> <span class="n">copy</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">;</span>

<span class="c1">// must be valid</span>
<span class="n">at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">from</span><span class="p">);</span>

<span class="c1">// must also be valid</span>
<span class="n">at</span><span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">from</span><span class="p">);</span>
</pre></div>
</div>
<p>In other words the positions must truly store position-specific information only, and should be indistinguishable by the
contexts. Otherwise, the context can still implement <a class="reference internal" href="operations.html#_CPPv2N5annex5range4saveE" title="annex::range::save"><code class="xref cpp cpp-any docutils literal"><span class="pre">save</span></code></a> specifically while remaining single-pass.</p>
</div>
</div>
<div class="section" id="range-properties">
<span id="id1"></span><h2>Range properties<a class="headerlink" href="#range-properties" title="Permalink to this headline">¶</a></h2>
<p>Altogether a <a class="reference internal" href="#_CPPv2I0EX8VariableI3RngEEN5annex5range5RangeE" title="annex::range::Range"><code class="xref cpp cpp-any docutils literal"><span class="pre">Range</span></code></a> has the following properties:</p>
<ul class="simple">
<li>its element types, given by <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range14peek_element_tE" title="annex::range::peek_element_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">peek_element_t</span></code></a> and <a class="reference internal" href="#_CPPv2I0EX4TypeI3CtxEEN5annex5range9element_tE" title="annex::range::element_t"><code class="xref cpp cpp-any docutils literal"><span class="pre">element_t</span></code></a> respectively&#8212;ranges for which those types coincide can
be described using just one element type</li>
<li>its traversal (the most refined concept its <a class="reference internal" href="#_CPPv2I0EX8VariableI3CtxEEN5annex5range7ContextE" title="annex::range::Context"><code class="xref cpp cpp-any docutils literal"><span class="pre">Context</span></code></a> models)</li>
<li>whether it is multi-pass or not (see <a class="reference internal" href="#copy-save-pass"><span class="std std-ref">Copying positions</span></a>)</li>
<li>whether its context is saveable or not (see <a class="reference internal" href="#copy-save-context"><span class="std std-ref">Saving contexts</span></a>)</li>
</ul>
<p>Those same properties can be used for describing the context of a range, too.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="operations.html" class="btn btn-neutral float-right" title="Operations &amp; functions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="reference.html" class="btn btn-neutral" title="Reference" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, mickk.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>