
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Designing a Range Abstraction &#8212; annex-range 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Iteration" href="study/iteration.html" />
    <link rel="prev" title="A Study of Ranges" href="index.html" /> 
  </head><body>
<script type="text/javascript">
    $(document).ready(function() {
        $(".collapsed > *").hide();
        $("div.collapsed > p.admonition-title").show();
        $("div.collapsed").children("p.admonition-title").toggleClass("closed");
        $("table.collapsed > caption").show();
        $("table.collapsed").children("caption").toggleClass("closed");
        const collapse_duration = 300;
        for(selector of [".collapsed", ".collapsible"]) {
            $(`div${selector} > p.admonition-title`).click(function() {
                $(this).parent().children().not("p.admonition-title").toggle(collapse_duration);
                $(this).parent().children("p.admonition-title").toggleClass("closed");
            });
            $(`table${selector} > caption`).click(function(ev) {
                // crude way to avoid intercepting a click on the anchor link
                if(ev.target.nodeName == "A") {
                    return;
                }
                $(this).parent().children().not("caption").toggle(collapse_duration);
                $(this).parent().children("caption").toggleClass("closed");
            })
        }
    });
</script>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="study/iteration.html" title="Iteration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="A Study of Ranges"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">annex-range 0.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="designing-a-range-abstraction">
<h1>Designing a Range Abstraction<a class="headerlink" href="#designing-a-range-abstraction" title="Permalink to this headline">¶</a></h1>
<p class="rubric">How to read this study</p>
<p>This study does not have to be read in strict order, although it is suggested to lead with <a class="reference internal" href="study/iteration.html"><span class="doc">Iteration</span></a>. This
introduction of sorts outlines the background, motivation, and scope of the study. Quite importantly it also sets up
some of the terminology.</p>
<div class="toctree-wrapper compound">
</div>
<p>From then on the reader can start from any topic and follow cross-references when necessary. In lieu of a reading guide,
it is suggested to take a look at the study structure for inspiration:</p>
<div class="section" id="criticism">
<h2>Criticism<a class="headerlink" href="#criticism" title="Permalink to this headline">¶</a></h2>
<p>Each ‘Criticism’ chapter presents some of the shortcomings of an existing iteration abstraction:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="study/state_of_the_art/iterators.html">C++ iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="study/state_of_the_art/alexandrescu_ranges.html">Alexandrescu-style ranges</a></li>
</ul>
</div>
</div>
<div class="section" id="design-elements">
<h2>Design elements<a class="headerlink" href="#design-elements" title="Permalink to this headline">¶</a></h2>
<p>Each ‘Design element’ chapter independently focuses on one design aspect of iteration abstractions, listing and
commenting on the trade-offs to be made. They are listed in rough order of importance with the more fundamental topics
coming first:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="study/elements/work.html">Amount of work</a></li>
<li class="toctree-l1"><a class="reference internal" href="study/elements/representation.html">Representation</a></li>
<li class="toctree-l1"><a class="reference internal" href="study/elements/traversal.html">Forms of traversal</a></li>
<li class="toctree-l1"><a class="reference internal" href="study/elements/termination.html">Termination and finiteness</a></li>
<li class="toctree-l1"><a class="reference internal" href="study/elements/types.html">Associated types</a></li>
</ul>
</div>
<p class="rubric">Conventions</p>
<p>Most of the pseudo-code contained in this study takes the form of C++17 extended with concepts<a class="footnote-reference brackets" href="#concepts" id="id1">1</a>. Other
languages are also used when discussing the existing iteration abstractions of their respective ecosystem.</p>
<p class="rubric" id="designers-tradeoff">The designer’s trade-off</p>
<p>Trade-offs are a recurring motif throughout this study. This is so because the designer of an iteration abstraction,
which is to say in practical terms the designer of a range ecosystem, acts as a broker between the implementers (i.e.
range authors) and their users (i.e. range consumers). Consequently the stricter the requirements on a particular range
concept or interface, the heavier the burden on range authors to satisfy it; but all the same the more guarantees for
range consumers to rely on. Conversely laxer requirements allow authors to implement a larger class of ranges; which
consumers can only use in more limited ways.</p>
<p>As a concrete example of the designer’s trade-off suppose that we, with our iteration abstraction designer hat firmly
on, wish to mandate that all ranges must be able to be queried for their length. Under this scheme the consequences are
immediate:</p>
<ul class="simple">
<li><p>non-finite ranges are ruled out which, depending on our mood, is perhaps not the most serious of offences</p></li>
<li><p>more concerningly however in the same breath we also ruled out possibly-finite ranges but which length cannot be
computed ahead of time, such as a range over network-produced elements</p></li>
</ul>
<p>Just as equally though, whenever a consumer ends up with a range in this scheme they can take for granted that it is
finite. Notably this makes it easy to tell that a simple loop over that range will terminate—a powerful guarantee in
any Turing-complete language. Should we remove our onerous requirement to enable more interesting ranges, then in all
likelihood all loops would need to be audited for termination.</p>
<p>All things considered this study does not aim to be prescriptive. On many occasions it qualifies choices in the
comparative: ‘stricter’, ‘laxer’, ‘more precisely’, and so on but these should not be understood as absolute mandates.
Rather they are hints that there exists here a continuum of behaviour. The careful reader should consider the
consequences of picking the opposite decision as well. In the end we always leave the final choice of direction in which
to tip the scales in the hands of the would-be iteration abstraction designer.</p>
<p>We leave <a class="tradeoff-icon reference internal" href="#designers-tradeoff"><span class="std std-ref"></span></a><strong class="tradeoff">reminders</strong> in our conclusions to link the reader back to here.</p>
<hr class="docutils" />
<dl class="footnote brackets">
<dt class="label" id="concepts"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Concepts are specified by <a class="reference external" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4674.pdf">n4674</a>.</p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Designing a Range Abstraction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="study/iteration.html">Iteration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#criticism">Criticism</a><ul>
<li class="toctree-l3"><a class="reference internal" href="study/state_of_the_art/iterators.html">C++ iterators</a></li>
<li class="toctree-l3"><a class="reference internal" href="study/state_of_the_art/alexandrescu_ranges.html">Alexandrescu-style ranges</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#design-elements">Design elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="study/elements/work.html">Amount of work</a></li>
<li class="toctree-l3"><a class="reference internal" href="study/elements/representation.html">Representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="study/elements/traversal.html">Forms of traversal</a></li>
<li class="toctree-l3"><a class="reference internal" href="study/elements/termination.html">Termination and finiteness</a></li>
<li class="toctree-l3"><a class="reference internal" href="study/elements/types.html">Associated types</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">The annex-range library</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About this document</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">A Study of Ranges</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="study/iteration.html"
                        title="next chapter">Iteration</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/study.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="study/iteration.html" title="Iteration"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="A Study of Ranges"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">annex-range 0.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, mickk.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7+.
    </div>
  </body>
</html>